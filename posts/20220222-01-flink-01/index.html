<!doctype html><html lang=en>
<head>
<title>Apache Flink 01: äº†è§£ä¸ç¯å¢ƒæ­å»º :: redxiiikk blog</title><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Apache Flink åŸºæœ¬æ¦‚å¿µä¸æœ¬æœºå¼€å‘ç¯å¢ƒæ­å»ºã€‚">
<meta name=keywords content>
<meta name=robots content="noodp">
<link rel=canonical href=https://redxiiikk.github.io/posts/20220222-01-flink-01/>
<link rel=stylesheet href=https://redxiiikk.github.io/assets/style.css>
<link rel=stylesheet href=https://redxiiikk.github.io/assets/green.css>
<link rel=apple-touch-icon href=https://redxiiikk.github.io/img/apple-touch-icon-192x192.png>
<link rel="shortcut icon" href=https://redxiiikk.github.io/img/favicon/green.png>
<meta name=twitter:card content="summary">
<meta name=twitter:site content>
<meta name=twitter:creator content>
<meta property="og:locale" content="en">
<meta property="og:type" content="article">
<meta property="og:title" content="Apache Flink 01: äº†è§£ä¸ç¯å¢ƒæ­å»º">
<meta property="og:description" content="Apache Flink åŸºæœ¬æ¦‚å¿µä¸æœ¬æœºå¼€å‘ç¯å¢ƒæ­å»ºã€‚">
<meta property="og:url" content="https://redxiiikk.github.io/posts/20220222-01-flink-01/">
<meta property="og:site_name" content="redxiiikk blog">
<meta property="og:image" content="https://redxiiikk.github.io/img/favicon/green.png">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">
<meta property="article:published_time" content="2022-02-22 15:13:27 +0000 UTC">
</head><body class=green>
<div class="container center headings--one-size">
<header class=header>
<div class=header__inner>
<div class=header__logo>
<a href=/>
<div class=logo>
redxiiikk
</div></a>
</div><div class=menu-trigger>menu</div></div><nav class=menu>
<ul class="menu__inner menu__inner--desktop">
<li><a href=/about>About</a></li></ul><ul class="menu__inner menu__inner--mobile">
<li><a href=/about>About</a></li></ul></nav></header><div class=content>
<div class=post>
<h1 class=post-title>
<a href=https://redxiiikk.github.io/posts/20220222-01-flink-01/>Apache Flink 01: äº†è§£ä¸ç¯å¢ƒæ­å»º</a></h1><div class=post-meta>
<span class=post-date>
2022-02-22
</span>
</div><div class=post-content><div>
<h1 id=ä»€ä¹ˆæ˜¯-flink>ä»€ä¹ˆæ˜¯ Flink<a href=#ä»€ä¹ˆæ˜¯-flink class=hanchor arialabel=Anchor>&#8983;</a> </h1><hr>
<p style=text-align:cente>Apache Flink æ˜¯ä¸€ä¸ªåœ¨æœ‰ç•Œæ•°æ®æµå’Œæ— ç•Œæ•°æ®æµä¸Šè¿›è¡Œæœ‰çŠ¶æ€è®¡ç®—åˆ†å¸ƒå¼å¤„ç†å¼•æ“å’Œæ¡†æ¶.Flink è®¾è®¡æ—¨åœ¨æ‰€æœ‰å¸¸è§çš„é›†ç¾¤ç¯å¢ƒä¸­è¿è¡Œ, ä»¥ä»»æ„è§„æ¨¡å’Œå†…å­˜çº§é€Ÿåº¦æ‰§è¡Œè®¡ç®—.</p><p style=text-align:right>â€”â€” Apache Flink ç¤¾åŒº</p><hr>
<p>ä¸ºäº†æ›´å¥½çš„ç†è§£ Apache Flink çš„å®šä¹‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€äº›æµè®¡ç®—ç›¸å…³çš„çŸ¥è¯†ã€‚</p><h2 id=æ‰¹è®¡ç®—ä¸æµè®¡ç®—>æ‰¹è®¡ç®—ä¸æµè®¡ç®—<a href=#æ‰¹è®¡ç®—ä¸æµè®¡ç®— class=hanchor arialabel=Anchor>&#8983;</a> </h2><p>å¤§æ•°æ®ä¸€å…±å…·æœ‰å››ç§è®¡ç®—æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ol>
<li>æ‰¹è®¡ç®—</li><li>æµè®¡ç®—</li><li>äº¤äº’è®¡ç®—</li><li>å›¾è®¡ç®—</li></ol><p>æ‰¹è®¡ç®—å’Œæµè®¡ç®—æ˜¯æœ€ä¸ºå¸¸è§çš„ä¸¤ç§æ¨¡å¼ï¼Œæ‰¹è®¡ç®—è¾ƒä¸ºå¥½ç†è§£ï¼Œæ˜¯æŒ‡å¯¹ä¸€æ‰¹è¾¹ç•Œå›ºå®šçš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚è¿‡å»ä¸€ä¸ªæœˆçš„é”€å”®æ•°æ®ã€ä¸€ä¸ª G çš„æ±½è½¦å®šä½æ•°æ®ç­‰ç­‰ã€‚</p><p>ä½†æ˜¯æ‰¹è®¡ç®—å­˜åœ¨ä¸€äº›ä¸è¶³ä¹‹å¤„ã€‚é¦–å…ˆæ˜¯ç¬¬ä¸€ç‚¹æ˜¯æ—¶æ•ˆæ€§æ— æ³•æ»¡è¶³ï¼Œæ‰¹è®¡ç®—æ— æ³•åŠæ—¶å†³ç­–æä¾›ä¾æ®ã€‚å½“æˆ‘ä»¬éœ€è¦æ ¹æ®å„ä¸ªæ¸ é“çš„é”€å”®æ•°é‡çš„æ€»å’Œå»åŠæ—¶çš„è°ƒæ•´åº“å­˜çš„æ—¶å€™ï¼Œæ‰¹è®¡ç®—åªèƒ½ç­‰å¾…ä¸€æ®µæ—¶å€™æ”¶é›†åˆ°è¶³å¤Ÿçš„æ•°æ®ä¹‹åæ‰èƒ½è®¡ç®—å‡ºæ€»å’Œï¼Œä¾‹å¦‚ä¸€ä¸ªæœˆä¹‹åæˆ‘ä»¬æ‰èƒ½è°ƒæ•´åº“å­˜ï¼Œå½“ç„¶å¯ä»¥ç¼©çŸ­è¿™ä¸€ä¸ªå‘¨æœŸï¼Œä½†æ˜¯æ— è®ºå‘¨æœŸçš„é•¿çŸ­ï¼Œå…¶æ—¶æ•ˆæ€§çš„é—®é¢˜å§‹ç»ˆå­˜åœ¨ï¼Œç„¶è€Œåœ¨å¦‚ä»Šæ¿€çƒˆç«äº‰ã€å¤æ‚å¤šå˜çš„å•†ä¸šç¯å¢ƒä¸‹ï¼Œè¥é”€æ—¶æœºè½¬ç¬å³é€ï¼Œé£é™©é˜²æ§å¿…é¡»åˆ†ç§’å¿…äº‰ï¼Œå•†ä¸šå†³ç­–è¦æ±‚å¿«é€Ÿç²¾å‡†ï¼Œå› æ­¤æ•°æ®çš„å¤„ç†å¿…é¡»åœ¨æ›´çŸ­çš„æ—¶é—´å†…å¾—åˆ°ç»“æœï¼Œæœ€å¥½æ˜¯èƒ½å¤Ÿåšåˆ°å®æ—¶å¤„ç†ã€‚</p><p>ç¬¬äºŒç‚¹å°±æ˜¯ä¸ç¬¦åˆçœŸå®ä¸–ç•Œçš„æ•°æ®äº§ç”Ÿçš„æ–¹å¼ã€‚çœŸå®ä¸–ç•Œä¸­çš„æ•°æ®æ˜¯æºæºä¸æ–­çš„äº§ç”Ÿçš„ï¼Œä¼ æ„Ÿå™¨ä¼šä¸æ–­çš„ä¸Šä¼ æ•°æ®ã€è®¢å•ä¼šä¸æ–­çš„äº§ç”Ÿã€è‚¡ç¥¨å¸‚åœºçš„äº¤æ˜“æ¯æ—¶æ¯åˆ»éƒ½åœ¨è¿›è¡Œï¼Œæ‰¹è®¡ç®—æ˜¾ç„¶æ— æ³•åº”å¯¹æºæºä¸æ–­çš„æ•°æ®ã€‚</p><p>åŸºäºä¸Šè¿°ä¸¤ä¸ªæ‰¹è®¡ç®—çš„ä¸è¶³ä¹‹å¤„ï¼Œæå‡ºäº†æµè®¡ç®—çš„æ¨¡å‹ï¼Œå¯ä»¥åœ¨æµæ•°æ®ä¸Šå®æ—¶çš„å¤„ç†æ•°æ®ï¼Œä¸ºå•†ä¸šå†³ç­–æä¾›ä¾æ®ã€‚</p><h2 id=apache-flink-ä¹‹å‰çš„æµè®¡ç®—æ¡†æ¶>Apache Flink ä¹‹å‰çš„æµè®¡ç®—æ¡†æ¶<a href=#apache-flink-ä¹‹å‰çš„æµè®¡ç®—æ¡†æ¶ class=hanchor arialabel=Anchor>&#8983;</a> </h2><p>åœ¨ Apache Flink å‡ºç°ä¹‹å‰ï¼Œå¼€æºçš„æµè®¡ç®—æ¡†æ¶å°±æœ‰ï¼š</p><ol>
<li>Apache Storm</li><li>Apache Spark Streaming</li></ol><p>Apache Spark Streaming é‡‡ç”¨ä¸€ç§å¾®æ‰¹å¤„ç†çš„æ€æƒ³å®ç°æµè®¡ç®—ï¼Œæœ¬è´¨ä¸Šæ˜¯å°†æµæ•°æ®åˆ†å‰²ä¸ºå¾®å°çš„ä¸€æ‰¹ä¸€æ‰¹çš„æ•°æ®ï¼Œå°†å…¶è½¬åŒ–ä¸ºæ‰¹å¤„ç†ï¼Œä»è€Œå®ç°åœ¨æµæ•°æ®ä¸Šè¿›è¡Œè®¡ç®—ã€‚</p><h2 id=apache-flink>Apache Flink<a href=#apache-flink class=hanchor arialabel=Anchor>&#8983;</a> </h2><ol>
<li>
<p>çœŸæ­£çš„æµè®¡ç®—æ¨¡å‹</p></li><li>
<p>æµæ‰¹ä¸€ä½“çš„è®¡ç®—æ¡†æ¶</p><p>ä¸ Spark ç›¸åï¼Œ Flink å°†æ‰¹è®¡ç®—è§†ä¸ºæµè®¡ç®—çš„ä¸€ç§ç‰¹æ®Šæ€§å½¢å¼æµè®¡ç®—</p></li><li>
<p>å¤šå±‚æ¬¡ API</p></li><li>
<p>æ–¹ä¾¿çš„æœ‰çŠ¶æ€è®¡ç®—</p></li><li>
<p>ä¸°å¯Œçš„æ—¶é—´è¯­ä¹‰çš„æ”¯æŒ</p></li></ol><h1 id=flink-ç¯å¢ƒæ­å»º>Flink ç¯å¢ƒæ­å»º<a href=#flink-ç¯å¢ƒæ­å»º class=hanchor arialabel=Anchor>&#8983;</a> </h1><h2 id=éƒ¨ç½²æ¨¡å¼ä¸èµ„æºç®¡ç†å™¨>éƒ¨ç½²æ¨¡å¼ä¸èµ„æºç®¡ç†å™¨<a href=#éƒ¨ç½²æ¨¡å¼ä¸èµ„æºç®¡ç†å™¨ class=hanchor arialabel=Anchor>&#8983;</a> </h2><p>Flink æä¾›äº†å¤šç§éƒ¨ç½²æ¨¡å¼ï¼š</p><ol>
<li>
<p><strong>Session Mode</strong></p><p>å¤šä¸ª Flink ä»»åŠ¡å…±äº« JobManager å’Œæ‰€æœ‰çš„ TaskMangers</p></li><li>
<p><strong>Job Mode</strong></p><p>æ¯ä¸€ä¸ª Flink ä»»åŠ¡ç‹¬å  JobManager å’Œæ‰€æœ‰çš„ TaskManager</p></li><li>
<p><strong>Application Mode</strong></p><p>æ¯ä¸ª Flink ä»»åŠ¡å…±äº« JobManager, ä½†æ˜¯æ¯ä¸ª TaskManager ä¸­åªè¿è¡Œä¸€ä¸ªä»»åŠ¡</p></li><li>
<p><strong>Native Mode</strong></p><p>æŒ‰éœ€ç”³è¯· TaskManager (æ‰€æœ‰çš„ä»»åŠ¡å…±äº« TaskManager)</p></li></ol><p>Flink æ”¯æŒå¤šç§èµ„æºç®¡ç†å™¨ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ¯ä¸€ç§èµ„æºç®¡ç†å™¨éƒ½æ”¯æŒæ‰€æœ‰çš„éƒ¨ç½²æ¨¡å¼ï¼Œå…·ä½“çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p><table>
<thead>
<tr>
<th></th><th>Session Mode</th><th>Job Mode</th><th>Application Mode</th><th>Native Mode</th></tr></thead><tbody>
<tr>
<td>Local</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td></tr><tr>
<td>Standalone</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td></tr><tr>
<td>Apache Yarn</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr>
<td>Apache Mesos</td><td>âœ…</td><td>âœ…</td><td>âŒ</td><td>âœ…</td></tr><tr>
<td>k8s</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr>
<td>Docker</td><td>âœ…</td><td>âœ…</td><td>âŒ</td><td>âŒ</td></tr></tbody></table><h2 id=standalone-éƒ¨ç½²>Standalone éƒ¨ç½²<a href=#standalone-éƒ¨ç½² class=hanchor arialabel=Anchor>&#8983;</a> </h2><p>å°†åœ¨æœ¬åœ°åˆ©ç”¨å®¹å™¨éƒ¨ç½² Flink åŠå…¶ç›¸å…³çš„å…¶ä»–åŸºç¡€è®¾æ–½ï¼Œä»¥ä¾¿åœ¨åç»­çš„å­¦ä¹ è¿‡ç¨‹ä¸­å¼€å‘å’Œè°ƒè¯• Flink ä»»åŠ¡ã€‚</p><h3 id=è‡ªå®šä¹‰-flink-é•œåƒ>è‡ªå®šä¹‰ Flink é•œåƒ<a href=#è‡ªå®šä¹‰-flink-é•œåƒ class=hanchor arialabel=Anchor>&#8983;</a> </h3><p>å› ä¸ºåœ¨åç»­çš„å­¦ä¹ ä¸­ï¼Œå¯èƒ½éœ€è¦å¼€å¯ Flink ä¸€äº›å¯é€‰çš„èƒ½åŠ›ï¼ˆä¾‹å¦‚ Queryable stateï¼‰ï¼Œå› æ­¤å¯ä»¥åœ¨å®˜æ–¹æä¾›çš„é•œåƒçš„åŸºç¡€ä¹‹ä¸Šè‡ªè¡Œæ„å»ºé•œåƒï¼Œä»¥ä¾¿åç»­è¿›è¡Œä¿®æ”¹ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Dockerfile data-lang=Dockerfile><span style=display:flex><span><span style=color:#75715e># ./flink/Dockerfile</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> docker.io/flink:1.14.3-scala_2.12-java11</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># å¯ç”¨ Queryable State</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> cp /opt/flink/opt/flink-queryable-state-runtime-1.14.3.jar /opt/flink/lib/flink-queryable-state-runtime-1.14.3.jar<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ENTRYPOINT</span> [<span style=color:#e6db74>&#34;/docker-entrypoint.sh&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>EXPOSE</span><span style=color:#e6db74> 6123 8081</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>CMD</span> [<span style=color:#e6db74>&#34;help&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>ä¹‹åå°†ä¼šåœ¨æœ¬åœ°æ„å»ºå‡ºé•œåƒï¼Œä»¥ä¾¿åç»­çš„ä½¿ç”¨</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ nerdctl build -f ./flink/Dockerfile --tag <span style=color:#e6db74>&#39;my/flink:latest&#39;</span> ./flink
</span></span></code></pre></div><h3 id=æ­å»ºç¯å¢ƒ>æ­å»ºç¯å¢ƒ<a href=#æ­å»ºç¯å¢ƒ class=hanchor arialabel=Anchor>&#8983;</a> </h3><p>åœ¨æœ¬æ–‡ä¸­é™¤å» Flink ä¹‹å¤–ï¼Œè¿˜ä¼šå¯åŠ¨ Kafka ç›¸å…³çš„æœåŠ¡ï¼Œä»¥æ–¹ä¾¿åç»­çš„å¼€å‘ä¸æµ‹è¯•åŠŸèƒ½ï¼Œå› æ­¤ä¼šä½¿ç”¨ Docker Compose åœ¨æœ¬åœ°åŒæ—¶å¯åŠ¨ 5 ä¸ªæœåŠ¡ï¼š</p><ol>
<li>JobManager: Flink ç»„ä»¶</li><li>TaskManager: Flink ç»„ä»¶</li><li>Zookeeper: Kafak åŸºç¡€è®¾æ–½</li><li>Kafka: Kafka æœåŠ¡</li><li>kowl: Kafka å¯è§†åŒ–é¢æ¿</li></ol><p>å…·ä½“çš„æœåŠ¡å®šä¹‰æ–‡ä»¶å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># ./compose.yml</span>
</span></span><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3.8&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>jobmanager</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>job-manager</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>my/flink:latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>command</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>jobmanager</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;8081:8081&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>FLINK_PROPERTIES</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        jobmanager.rpc.address: jobmanager
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        queryable-state.enable: true</span>        
</span></span><span style=display:flex><span>  <span style=color:#f92672>taskmanager</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>jobmanager</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>task-manager</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>my/flink:latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>command</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>taskmanager</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>FLINK_PROPERTIES</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        jobmanager.rpc.address: jobmanager
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        taskmanager.numberOfTaskSlots: 4
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        queryable-state.enable: true</span>        
</span></span><span style=display:flex><span>  <span style=color:#f92672>zookeeper</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>confluentinc/cp-zookeeper:7.0.0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hostname</span>: <span style=color:#ae81ff>zookeeper</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>zookeeper</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>ZOOKEEPER_CLIENT_PORT</span>: <span style=color:#ae81ff>2181</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ZOOKEEPER_TICK_TIME</span>: <span style=color:#ae81ff>2000</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>kafka</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>confluentinc/cp-kafka:7.0.0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hostname</span>: <span style=color:#ae81ff>kafka</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>kafka</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;9092:9092&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>KAFKA_BROKER_ID</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>KAFKA_ZOOKEEPER_CONNECT</span>: <span style=color:#e6db74>&#34;zookeeper:2181&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>KAFKA_ADVERTISED_LISTENERS</span>: <span style=color:#ae81ff>LISTENER_DOCKER_INTERNAL://kafka:19092,LISTENER_DOCKER_EXTERNAL://${DOCKER_HOST_IP:-127.0.0.1}:9092</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>KAFKA_LISTENER_SECURITY_PROTOCOL_MAP</span>: <span style=color:#ae81ff>LISTENER_DOCKER_INTERNAL:PLAINTEXT,LISTENER_DOCKER_EXTERNAL:PLAINTEXT</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>KAFKA_INTER_BROKER_LISTENER_NAME</span>: <span style=color:#ae81ff>LISTENER_DOCKER_INTERNAL</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>zookeeper</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>kowl</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>quay.io/cloudhut/kowl:v1.4.0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#66d9ef>on</span>-<span style=color:#ae81ff>failure</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>kowl</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>hostname</span>: <span style=color:#ae81ff>kowl</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;8080:8080&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>KAFKA_BROKERS</span>: <span style=color:#ae81ff>kafka:19092</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>kafka</span>
</span></span></code></pre></div><p>å¯åŠ¨æœåŠ¡çš„å®Œæ•´çš„è„šæœ¬å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># ./start.sh</span>
</span></span><span style=display:flex><span>nerdctl build -f ./flink/Dockerfile --tag <span style=color:#e6db74>&#39;my/flink:latest&#39;</span> ./flink
</span></span><span style=display:flex><span>nerdctl compose -p flink -f ./compose.yml up -d
</span></span></code></pre></div><blockquote>
<p>åœ¨æ¯æ¬¡å¯åŠ¨ä¹‹å‰éƒ½ä¼šé¢„å…ˆæ„å»º Flink é•œåƒ</p></blockquote><blockquote>
<p>æœ¬æ–‡åŠåç»­åšå®¢å°†ä½¿ç”¨ containerd å’Œ nerdctl æ¥ç®¡ç†æœ¬åœ°é•œåƒï¼Œå¯¹äº docker å¯ä»¥ç›´æ¥å°†è„šæœ¬ä¸­çš„ nerdctl æ›¿æ¢ä¸º docker å³å¯ï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹å¯ä»¥å…¼å®¹ã€‚</p></blockquote><blockquote>
<p>nerdctl å¯¹äº Docker Compose çš„æ”¯æŒå¹¶ä¸å®Œæ•´ ğŸ˜‚ ï¼Œå› æ­¤ kowl æœåŠ¡æ— æ³•åœ¨å¤±è´¥ä¹‹åè‡ªåŠ¨é‡å¯ï¼Œéœ€è¦åœ¨æ‰§è¡Œä¸Šè¿°è„šæœ¬ä¹‹åç­‰å¾…ä¸€åˆ†é’Ÿä¹‹åæ‰‹åŠ¨é‡å¯ kowl æœåŠ¡ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ nerdctl container start kowl
</span></span></code></pre></div></blockquote><blockquote>
<p>å¦‚æœéœ€è¦éƒ¨ç½²å¤šä¸ª TaskManger ï¼Œå¯ä»¥å°† Compose æ–‡ä»¶ä¸­çš„ taskmanager æœåŠ¡å®šä¹‰å¤šä»½å³å¯ï¼ˆä¸è¦é‡åï¼‰</p></blockquote><h3 id=éªŒè¯>éªŒè¯<a href=#éªŒè¯ class=hanchor arialabel=Anchor>&#8983;</a> </h3><p>å½“å®Œæˆä¸Šè¿°æ­¥éª¤çš„æ­å»ºä¹‹åï¼Œå¯ä»¥æ‰“å¼€ <a href=http://localhost:8081/>Apache Flink Dashboard (http://localhost:8081)</a></p><p><img src=https://raw.githubusercontent.com/redxiiikk/redxiiikk.github.io/images/20220222175635.png alt></p><h1 id=å‚è€ƒæ–‡ç« >å‚è€ƒæ–‡ç« <a href=#å‚è€ƒæ–‡ç«  class=hanchor arialabel=Anchor>&#8983;</a> </h1><ol>
<li><a href=https://www.emqx.com/zh/blog/birth-of-streaming-database>å½“æ•°æ®åº“é‡ä¸Šæµè®¡ç®—ï¼šæµæ•°æ®åº“çš„è¯ç”Ÿï¼</a></li><li><a href=https://www.oracle.com/cn/big-data/what-is-big-data/>å¤§æ•°æ®ä»‹ç»</a></li><li><a href=http://www.qiujialin.me/2019/10/06/Flink%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Flink%E6%98%AF%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E6%B5%81%E5%BC%8F%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%9A%84%E4%B8%A4%E5%A4%A7%E9%9A%BE%E9%A2%98>Flink å­¦ä¹ ç¬”è®° &ndash; Flink æ˜¯å¦‚ä½•å¤„ç†æµå¼è®¡ç®—ä¸­çš„ä¸¤å¤§éš¾é¢˜</a></li></ol></div></div><div class=pagination>
<div class=pagination__title>
<span class=pagination__title-h>Read other posts</span>
<hr>
</div><div class=pagination__buttons>
<span class="button next">
<a href=https://redxiiikk.github.io/posts/20210525-01-condition-bean-in-spring-mvc/>
<span class=button__text>Spring MVC ä¸­æ¡ä»¶æ³¨è§£å¯¼è‡´ @Autowired æ³¨è§£å¤±æ•ˆçš„ BUG</span>
<span class=button__icon>â†’</span>
</a>
</span>
</div></div><script src=https://utteranc.es/client.js repo=redxiiikk/redxiiikk.github.io issue-term=og:title theme=preferred-color-scheme crossorigin=anonymous async></script>
</div></div><footer class=footer>
<div class=footer__inner>
<div class=copyright>
<span>Â© 2022 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span>
</div></div></footer><script src=https://redxiiikk.github.io/assets/main.js></script>
<script src=https://redxiiikk.github.io/assets/prism.js></script>
<script src=https://redxiiikk.github.io/assets/languageSelector.js></script>
</div></body></html>