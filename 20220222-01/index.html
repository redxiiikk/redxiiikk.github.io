<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Apache Flink 01: äº†è§£ä¸ç¯å¢ƒæ­å»º | redxiiikk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="åœ¨æœ¬ç¯‡åšå®¢ä¸­å°†å¯¹ Apache Flink çš„ä¸€äº›æ¦‚å¿µè¿›è¡Œäº†è§£å¹¶ä¸”ä¼šåœ¨æœ¬åœ°æ­å»º Apache Flink çš„å¼€å‘ä¸æµ‹è¯•ç¯å¢ƒã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="Apache Flink 01: äº†è§£ä¸ç¯å¢ƒæ­å»º">
<meta property="og:url" content="https://redxiiikk.github.io/20220222-01/index.html">
<meta property="og:site_name" content="redxiiikk">
<meta property="og:description" content="åœ¨æœ¬ç¯‡åšå®¢ä¸­å°†å¯¹ Apache Flink çš„ä¸€äº›æ¦‚å¿µè¿›è¡Œäº†è§£å¹¶ä¸”ä¼šåœ¨æœ¬åœ°æ­å»º Apache Flink çš„å¼€å‘ä¸æµ‹è¯•ç¯å¢ƒã€‚">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/redxiiikk/redxiiikk.github.io/images/20220222175635.png">
<meta property="article:published_time" content="2022-02-22T07:13:27.000Z">
<meta property="article:modified_time" content="2022-02-23T07:59:19.247Z">
<meta property="article:author" content="redxiiikk">
<meta property="article:tag" content="Flink">
<meta property="article:tag" content="BigData">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/redxiiikk/redxiiikk.github.io/images/20220222175635.png">
  
    <link rel="alternate" href="/atom.xml" title="redxiiikk" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">redxiiikk</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">æ¬ç –å·¥ç¨‹å¸ˆ</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://redxiiikk.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-20220222-01-flink-01" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/20220222-01/" class="article-date">
  <time class="dt-published" datetime="2022-02-22T07:13:27.000Z" itemprop="datePublished">2022-02-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Flink/">Flink</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Apache Flink 01: äº†è§£ä¸ç¯å¢ƒæ­å»º
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨æœ¬ç¯‡åšå®¢ä¸­å°†å¯¹ Apache Flink çš„ä¸€äº›æ¦‚å¿µè¿›è¡Œäº†è§£å¹¶ä¸”ä¼šåœ¨æœ¬åœ°æ­å»º Apache Flink çš„å¼€å‘ä¸æµ‹è¯•ç¯å¢ƒã€‚</p>
<span id="more"></span>

<h1 id="ä»€ä¹ˆæ˜¯-Flink"><a href="#ä»€ä¹ˆæ˜¯-Flink" class="headerlink" title="ä»€ä¹ˆæ˜¯ Flink"></a>ä»€ä¹ˆæ˜¯ Flink</h1><hr>
<center>
<strong>
Apache Flink æ˜¯ä¸€ä¸ªåœ¨æœ‰ç•Œæ•°æ®æµå’Œæ— ç•Œæ•°æ®æµä¸Šè¿›è¡Œæœ‰çŠ¶æ€è®¡ç®—åˆ†å¸ƒå¼å¤„ç†å¼•æ“å’Œæ¡†æ¶ã€‚Flink è®¾è®¡æ—¨åœ¨æ‰€æœ‰å¸¸è§çš„é›†ç¾¤ç¯å¢ƒä¸­è¿è¡Œï¼Œä»¥ä»»æ„è§„æ¨¡å’Œå†…å­˜çº§é€Ÿåº¦æ‰§è¡Œè®¡ç®—ã€‚
</strong>

<p align="right">â€”â€” Apache Flink ç¤¾åŒº</p>

</center>

<hr>
<p>ä¸ºäº†æ›´å¥½çš„ç†è§£ Apache Flink çš„å®šä¹‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€äº›æµè®¡ç®—ç›¸å…³çš„çŸ¥è¯†ã€‚</p>
<h2 id="æ‰¹è®¡ç®—ä¸æµè®¡ç®—"><a href="#æ‰¹è®¡ç®—ä¸æµè®¡ç®—" class="headerlink" title="æ‰¹è®¡ç®—ä¸æµè®¡ç®—"></a>æ‰¹è®¡ç®—ä¸æµè®¡ç®—</h2><p>å¤§æ•°æ®ä¸€å…±å…·æœ‰å››ç§è®¡ç®—æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li>æ‰¹è®¡ç®—</li>
<li>æµè®¡ç®—</li>
<li>äº¤äº’è®¡ç®—</li>
<li>å›¾è®¡ç®—</li>
</ol>
<p>æ‰¹è®¡ç®—å’Œæµè®¡ç®—æ˜¯æœ€ä¸ºå¸¸è§çš„ä¸¤ç§æ¨¡å¼ï¼Œæ‰¹è®¡ç®—è¾ƒä¸ºå¥½ç†è§£ï¼Œæ˜¯æŒ‡å¯¹ä¸€æ‰¹è¾¹ç•Œå›ºå®šçš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚è¿‡å»ä¸€ä¸ªæœˆçš„é”€å”®æ•°æ®ã€ä¸€ä¸ª G çš„æ±½è½¦å®šä½æ•°æ®ç­‰ç­‰ã€‚</p>
<p>ä½†æ˜¯æ‰¹è®¡ç®—å­˜åœ¨ä¸€äº›ç¼ºé™·ã€‚é¦–å…ˆæ˜¯ç¬¬ä¸€ç‚¹æ˜¯æ—¶æ•ˆæ€§æ— æ³•æ»¡è¶³ï¼Œæ‰¹è®¡ç®—æ— æ³•åŠæ—¶å†³ç­–æä¾›ä¾æ®ã€‚å½“æˆ‘ä»¬éœ€è¦æ ¹æ®å„ä¸ªæ¸ é“çš„é”€å”®æ•°é‡çš„æ€»å’Œå»åŠæ—¶çš„è°ƒæ•´åº“å­˜çš„æ—¶å€™ï¼Œæ‰¹è®¡ç®—åªèƒ½ç­‰å¾…ä¸€æ®µæ—¶å€™æ”¶é›†åˆ°è¶³å¤Ÿçš„æ•°æ®ä¹‹åæ‰èƒ½è®¡ç®—å‡ºæ€»å’Œï¼Œä¾‹å¦‚ä¸€ä¸ªæœˆä¹‹åæˆ‘ä»¬æ‰èƒ½è°ƒæ•´åº“å­˜ï¼Œå½“ç„¶å¯ä»¥ç¼©çŸ­è¿™ä¸€ä¸ªå‘¨æœŸï¼Œä½†æ˜¯æ— è®ºå‘¨æœŸçš„é•¿çŸ­ï¼Œå…¶æ—¶æ•ˆæ€§çš„é—®é¢˜å§‹ç»ˆå­˜åœ¨ï¼Œç„¶è€Œåœ¨å¦‚ä»Šæ¿€çƒˆç«äº‰ã€å¤æ‚å¤šå˜çš„å•†ä¸šç¯å¢ƒä¸‹ï¼Œè¥é”€æ—¶æœºè½¬ç¬å³é€ï¼Œé£é™©é˜²æ§å¿…é¡»åˆ†ç§’å¿…äº‰ï¼Œå•†ä¸šå†³ç­–è¦æ±‚å¿«é€Ÿç²¾å‡†ï¼Œå› æ­¤æ•°æ®çš„å¤„ç†å¿…é¡»åœ¨æ›´çŸ­çš„æ—¶é—´å†…å¾—åˆ°ç»“æœï¼Œæœ€å¥½æ˜¯èƒ½å¤Ÿåšåˆ°å®æ—¶å¤„ç†ã€‚</p>
<p>ç¬¬äºŒç‚¹å°±æ˜¯ä¸ç¬¦åˆçœŸå®ä¸–ç•Œçš„æ•°æ®äº§ç”Ÿçš„æ–¹å¼ã€‚çœŸå®ä¸–ç•Œä¸­çš„æ•°æ®æ˜¯æºæºä¸æ–­çš„äº§ç”Ÿçš„ï¼Œä¼ æ„Ÿå™¨ä¼šä¸æ–­çš„ä¸Šä¼ æ•°æ®ã€è®¢å•ä¼šä¸æ–­çš„äº§ç”Ÿã€è‚¡ç¥¨å¸‚åœºçš„äº¤æ˜“æ¯æ—¶æ¯åˆ»éƒ½åœ¨è¿›è¡Œï¼Œæ‰¹è®¡ç®—æ˜¾ç„¶æ— æ³•åº”å¯¹æºæºä¸æ–­çš„æ•°æ®ã€‚</p>
<p>åŸºäºä¸Šè¿°ä¸¤ä¸ªæ‰¹è®¡ç®—çš„ä¸è¶³ä¹‹å¤„ï¼Œæå‡ºäº†æµè®¡ç®—çš„æ¨¡å‹ï¼Œå¯ä»¥åœ¨æµæ•°æ®ä¸Šå®æ—¶çš„å¤„ç†æ•°æ®ï¼Œä¸ºå•†ä¸šå†³ç­–æä¾›ä¾æ®ã€‚</p>
<h2 id="Apache-Flink-ä¹‹å‰çš„æµè®¡ç®—æ¡†æ¶"><a href="#Apache-Flink-ä¹‹å‰çš„æµè®¡ç®—æ¡†æ¶" class="headerlink" title="Apache Flink ä¹‹å‰çš„æµè®¡ç®—æ¡†æ¶"></a>Apache Flink ä¹‹å‰çš„æµè®¡ç®—æ¡†æ¶</h2><p>åœ¨ Apache Flink å‡ºç°ä¹‹å‰ï¼Œå¼€æºçš„æµè®¡ç®—æ¡†æ¶å°±æœ‰ï¼š</p>
<ol>
<li>Apache Storm</li>
<li>Apache Spark Streaming</li>
</ol>
<p>Apache Spark Streaming é‡‡ç”¨ä¸€ç§å¾®æ‰¹å¤„ç†çš„æ€æƒ³å®ç°æµè®¡ç®—ï¼Œæœ¬è´¨ä¸Šæ˜¯å°†æµæ•°æ®åˆ†å‰²ä¸ºå¾®å°çš„ä¸€æ‰¹ä¸€æ‰¹çš„æ•°æ®ï¼Œå°†å…¶è½¬åŒ–ä¸ºæ‰¹å¤„ç†ï¼Œä»è€Œå®ç°åœ¨æµæ•°æ®ä¸Šè¿›è¡Œè®¡ç®—ã€‚</p>
<h2 id="Apache-Flink"><a href="#Apache-Flink" class="headerlink" title="Apache Flink"></a>Apache Flink</h2><ol>
<li><p>çœŸæ­£çš„æµè®¡ç®—æ¨¡å‹</p>
</li>
<li><p>æµæ‰¹ä¸€ä½“çš„è®¡ç®—æ¡†æ¶</p>
<p>ä¸ Spark ç›¸åï¼Œ Flink å°†æ‰¹è®¡ç®—è§†ä¸ºæµè®¡ç®—çš„ä¸€ç§ç‰¹æ®Šæ€§å½¢å¼æµè®¡ç®—</p>
</li>
<li><p>å¤šå±‚æ¬¡ API</p>
</li>
<li><p>æ–¹ä¾¿çš„æœ‰çŠ¶æ€è®¡ç®—</p>
</li>
<li><p>ä¸°å¯Œçš„æ—¶é—´è¯­ä¹‰çš„æ”¯æŒ</p>
</li>
</ol>
<h1 id="Flink-ç¯å¢ƒæ­å»º"><a href="#Flink-ç¯å¢ƒæ­å»º" class="headerlink" title="Flink ç¯å¢ƒæ­å»º"></a>Flink ç¯å¢ƒæ­å»º</h1><h2 id="éƒ¨ç½²æ¨¡å¼ä¸èµ„æºç®¡ç†å™¨"><a href="#éƒ¨ç½²æ¨¡å¼ä¸èµ„æºç®¡ç†å™¨" class="headerlink" title="éƒ¨ç½²æ¨¡å¼ä¸èµ„æºç®¡ç†å™¨"></a>éƒ¨ç½²æ¨¡å¼ä¸èµ„æºç®¡ç†å™¨</h2><p>Flink æä¾›äº†å¤šç§éƒ¨ç½²æ¨¡å¼ï¼š</p>
<ol>
<li><p><strong>Session Mode</strong></p>
<p>å¤šä¸ª Flink ä»»åŠ¡å…±äº« JobManager å’Œæ‰€æœ‰çš„ TaskMangers</p>
</li>
<li><p><strong>Job Mode</strong></p>
<p>æ¯ä¸€ä¸ª Flink ä»»åŠ¡ç‹¬å  JobManager å’Œæ‰€æœ‰çš„ TaskManager</p>
</li>
<li><p><strong>Application Mode</strong></p>
<p>æ¯ä¸ª Flink ä»»åŠ¡å…±äº« JobManager, ä½†æ˜¯æ¯ä¸ª TaskManager ä¸­åªè¿è¡Œä¸€ä¸ªä»»åŠ¡</p>
</li>
<li><p><strong>Native Mode</strong></p>
<p>æŒ‰éœ€ç”³è¯· TaskManager (æ‰€æœ‰çš„ä»»åŠ¡å…±äº« TaskManager)</p>
</li>
</ol>
<p>Flink æ”¯æŒå¤šç§èµ„æºç®¡ç†å™¨ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ¯ä¸€ç§èµ„æºç®¡ç†å™¨éƒ½æ”¯æŒæ‰€æœ‰çš„éƒ¨ç½²æ¨¡å¼ï¼Œå…·ä½“çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>Session Mode</th>
<th>Job Mode</th>
<th>Application Mode</th>
<th>Native Mode</th>
</tr>
</thead>
<tbody><tr>
<td>Local</td>
<td>âœ…</td>
<td>âŒ</td>
<td>âŒ</td>
<td>âŒ</td>
</tr>
<tr>
<td>Standalone</td>
<td>âœ…</td>
<td>âŒ</td>
<td>âŒ</td>
<td>âŒ</td>
</tr>
<tr>
<td>Apache Yarn</td>
<td>âœ…</td>
<td>âœ…</td>
<td>âœ…</td>
<td>âœ…</td>
</tr>
<tr>
<td>Apache Mesos</td>
<td>âœ…</td>
<td>âœ…</td>
<td>âŒ</td>
<td>âœ…</td>
</tr>
<tr>
<td>k8s</td>
<td>âœ…</td>
<td>âœ…</td>
<td>âœ…</td>
<td>âœ…</td>
</tr>
<tr>
<td>Docker</td>
<td>âœ…</td>
<td>âœ…</td>
<td>âŒ</td>
<td>âŒ</td>
</tr>
</tbody></table>
<h2 id="Standalone-éƒ¨ç½²"><a href="#Standalone-éƒ¨ç½²" class="headerlink" title="Standalone éƒ¨ç½²"></a>Standalone éƒ¨ç½²</h2><p>å°†åœ¨æœ¬åœ°åˆ©ç”¨å®¹å™¨éƒ¨ç½² Flink åŠå…¶ç›¸å…³çš„å…¶ä»–åŸºç¡€è®¾æ–½ï¼Œä»¥ä¾¿åœ¨åç»­çš„å­¦ä¹ è¿‡ç¨‹ä¸­å¼€å‘å’Œè°ƒè¯• Flink ä»»åŠ¡ã€‚</p>
<h3 id="è‡ªå®šä¹‰-Flink-é•œåƒ"><a href="#è‡ªå®šä¹‰-Flink-é•œåƒ" class="headerlink" title="è‡ªå®šä¹‰ Flink é•œåƒ"></a>è‡ªå®šä¹‰ Flink é•œåƒ</h3><p>å› ä¸ºåœ¨åç»­çš„å­¦ä¹ ä¸­ï¼Œå¯èƒ½éœ€è¦å¼€å¯ Flink ä¸€äº›å¯é€‰çš„èƒ½åŠ›ï¼ˆä¾‹å¦‚ Queryable stateï¼‰ï¼Œå› æ­¤å¯ä»¥åœ¨å®˜æ–¹æä¾›çš„é•œåƒçš„åŸºç¡€ä¹‹ä¸Šè‡ªè¡Œæ„å»ºé•œåƒï¼Œä»¥ä¾¿åç»­è¿›è¡Œä¿®æ”¹ã€‚</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ./flink/Dockerfile</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> docker.io/flink:<span class="number">1.14</span>.<span class="number">3</span>-scala_2.<span class="number">12</span>-java11</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ç”¨ Queryable State</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">cp</span> /opt/flink/opt/flink-queryable-state-runtime-1.14.3.jar /opt/flink/lib/flink-queryable-state-runtime-1.14.3.jar</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;/docker-entrypoint.sh&quot;</span>]</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">6123</span> <span class="number">8081</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;help&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p>ä¹‹åå°†ä¼šåœ¨æœ¬åœ°æ„å»ºå‡ºé•œåƒï¼Œä»¥ä¾¿åç»­çš„ä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$ </span><span class="language-bash">nerdctl build -f ./flink/Dockerfile --tag <span class="string">&#x27;my/flink:latest&#x27;</span> ./flink</span></span><br></pre></td></tr></table></figure>

<h3 id="æ­å»ºç¯å¢ƒ"><a href="#æ­å»ºç¯å¢ƒ" class="headerlink" title="æ­å»ºç¯å¢ƒ"></a>æ­å»ºç¯å¢ƒ</h3><p>åœ¨æœ¬æ–‡ä¸­é™¤å» Flink ä¹‹å¤–ï¼Œè¿˜ä¼šå¯åŠ¨ Kafka ç›¸å…³çš„æœåŠ¡ï¼Œä»¥æ–¹ä¾¿åç»­çš„å¼€å‘ä¸æµ‹è¯•åŠŸèƒ½ï¼Œå› æ­¤ä¼šä½¿ç”¨ Docker Compose åœ¨æœ¬åœ°åŒæ—¶å¯åŠ¨ 5 ä¸ªæœåŠ¡ï¼š</p>
<ol>
<li>JobManager: Flink ç»„ä»¶</li>
<li>TaskManager: Flink ç»„ä»¶</li>
<li>Zookeeper: Kafak åŸºç¡€è®¾æ–½</li>
<li>Kafka: Kafka æœåŠ¡</li>
<li>kowl: Kafka å¯è§†åŒ–é¢æ¿</li>
</ol>
<p>å…·ä½“çš„æœåŠ¡å®šä¹‰æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ./compose.yml</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.8&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">jobmanager:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">job-manager</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">my/flink:latest</span></span><br><span class="line">    <span class="attr">command:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">jobmanager</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8081:8081&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">FLINK_PROPERTIES:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        jobmanager.rpc.address: jobmanager</span></span><br><span class="line"><span class="string">        queryable-state.enable: true</span></span><br><span class="line"><span class="string"></span>  <span class="attr">taskmanager:</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">jobmanager</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">task-manager</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">my/flink:latest</span></span><br><span class="line">    <span class="attr">command:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">taskmanager</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">FLINK_PROPERTIES:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        jobmanager.rpc.address: jobmanager</span></span><br><span class="line"><span class="string">        taskmanager.numberOfTaskSlots: 4</span></span><br><span class="line"><span class="string">        queryable-state.enable: true</span></span><br><span class="line"><span class="string"></span>  <span class="attr">zookeeper:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">confluentinc/cp-zookeeper:7.0.0</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">zookeeper</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">zookeeper</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">ZOOKEEPER_CLIENT_PORT:</span> <span class="number">2181</span></span><br><span class="line">      <span class="attr">ZOOKEEPER_TICK_TIME:</span> <span class="number">2000</span></span><br><span class="line">  <span class="attr">kafka:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">confluentinc/cp-kafka:7.0.0</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">kafka</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">kafka</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;9092:9092&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">KAFKA_BROKER_ID:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">KAFKA_ZOOKEEPER_CONNECT:</span> <span class="string">&quot;zookeeper:2181&quot;</span></span><br><span class="line">      <span class="attr">KAFKA_ADVERTISED_LISTENERS:</span> <span class="string">LISTENER_DOCKER_INTERNAL://kafka:19092,LISTENER_DOCKER_EXTERNAL://$&#123;DOCKER_HOST_IP:-127.0.0.1&#125;:9092</span></span><br><span class="line">      <span class="attr">KAFKA_LISTENER_SECURITY_PROTOCOL_MAP:</span> <span class="string">LISTENER_DOCKER_INTERNAL:PLAINTEXT,LISTENER_DOCKER_EXTERNAL:PLAINTEXT</span></span><br><span class="line">      <span class="attr">KAFKA_INTER_BROKER_LISTENER_NAME:</span> <span class="string">LISTENER_DOCKER_INTERNAL</span></span><br><span class="line">      <span class="attr">KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">zookeeper</span></span><br><span class="line">  <span class="attr">kowl:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">quay.io/cloudhut/kowl:v1.4.0</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">on-failure</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">kowl</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">kowl</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8080:8080&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">KAFKA_BROKERS:</span> <span class="string">kafka:19092</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">kafka</span></span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨æœåŠ¡çš„å®Œæ•´çš„è„šæœ¬å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ./start.sh</span></span><br><span class="line">nerdctl build -f ./flink/Dockerfile --tag <span class="string">&#x27;my/flink:latest&#x27;</span> ./flink</span><br><span class="line">nerdctl compose -p flink -f ./compose.yml up -d</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨æ¯æ¬¡å¯åŠ¨ä¹‹å‰éƒ½ä¼šé¢„å…ˆæ„å»º Flink é•œåƒ</p>
</blockquote>
<blockquote>
<p>æœ¬æ–‡åŠåç»­åšå®¢å°†ä½¿ç”¨ containerd å’Œ nerdctl æ¥ç®¡ç†æœ¬åœ°é•œåƒï¼Œå¯¹äº docker å¯ä»¥ç›´æ¥å°†è„šæœ¬ä¸­çš„ nerdctl æ›¿æ¢ä¸º docker å³å¯ï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹å¯ä»¥å…¼å®¹ã€‚</p>
</blockquote>
<blockquote>
<p>nerdctl å¯¹äº Docker Compose çš„æ”¯æŒå¹¶ä¸å®Œæ•´ ğŸ˜‚ ï¼Œå› æ­¤ kowl æœåŠ¡æ— æ³•åœ¨å¤±è´¥ä¹‹åè‡ªåŠ¨é‡å¯ï¼Œéœ€è¦åœ¨æ‰§è¡Œä¸Šè¿°è„šæœ¬ä¹‹åç­‰å¾…ä¸€åˆ†é’Ÿä¹‹åæ‰‹åŠ¨é‡å¯ kowl æœåŠ¡ï¼š </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$ </span><span class="language-bash">nerdctl container start kowl</span></span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>å¦‚æœéœ€è¦éƒ¨ç½²å¤šä¸ª TaskManger ï¼Œå¯ä»¥å°† Compose æ–‡ä»¶ä¸­çš„ taskmanager æœåŠ¡å®šä¹‰å¤šä»½å³å¯ï¼ˆä¸è¦é‡åï¼‰</p>
</blockquote>
<h3 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><p>å½“å®Œæˆä¸Šè¿°æ­¥éª¤çš„æ­å»ºä¹‹åï¼Œå¯ä»¥æ‰“å¼€ <a target="_blank" rel="noopener" href="http://localhost:8081/">Apache Flink Dashboard (http://localhost:8081)</a></p>
<p><img src="https://raw.githubusercontent.com/redxiiikk/redxiiikk.github.io/images/20220222175635.png"></p>
<h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><ol>
<li><a target="_blank" rel="noopener" href="https://www.emqx.com/zh/blog/birth-of-streaming-database">å½“æ•°æ®åº“é‡ä¸Šæµè®¡ç®—ï¼šæµæ•°æ®åº“çš„è¯ç”Ÿï¼</a></li>
<li><a target="_blank" rel="noopener" href="https://www.oracle.com/cn/big-data/what-is-big-data/">å¤§æ•°æ®ä»‹ç»</a></li>
<li><a target="_blank" rel="noopener" href="http://www.qiujialin.me/2019/10/06/Flink%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Flink%E6%98%AF%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E6%B5%81%E5%BC%8F%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%9A%84%E4%B8%A4%E5%A4%A7%E9%9A%BE%E9%A2%98">Flink å­¦ä¹ ç¬”è®° â€“ Flink æ˜¯å¦‚ä½•å¤„ç†æµå¼è®¡ç®—ä¸­çš„ä¸¤å¤§éš¾é¢˜</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://redxiiikk.github.io/20220222-01/" data-id="ckzz9n0ty000s86ok4ovb8zfg" data-title="Apache Flink 01: äº†è§£ä¸ç¯å¢ƒæ­å»º" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BigData/" rel="tag">BigData</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flink/" rel="tag">Flink</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/20210525-01/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Spring MVC ä¸­æ¡ä»¶æ³¨è§£å¯¼è‡´ @Autowired æ³¨è§£å¤±æ•ˆçš„ BUG</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Design-Patter/">Design Patter</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flink/">Flink</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Github/">Github</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%98%E8%85%BE/">æŠ˜è…¾</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">ç®—æ³•</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/BigData/" rel="tag">BigData</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CLI/" rel="tag">CLI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Clash/" rel="tag">Clash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Patter/" rel="tag">Design Patter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FSM/" rel="tag">FSM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flink/" rel="tag">Flink</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github/" rel="tag">Github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github-Actions/" rel="tag">Github Actions</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/" rel="tag">Tools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/" rel="tag">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%98%E8%85%BE/" rel="tag">æŠ˜è…¾</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">ç®—æ³•</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/BigData/" style="font-size: 10px;">BigData</a> <a href="/tags/CLI/" style="font-size: 10px;">CLI</a> <a href="/tags/Clash/" style="font-size: 15px;">Clash</a> <a href="/tags/Design-Patter/" style="font-size: 10px;">Design Patter</a> <a href="/tags/FSM/" style="font-size: 10px;">FSM</a> <a href="/tags/Flink/" style="font-size: 10px;">Flink</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Github/" style="font-size: 10px;">Github</a> <a href="/tags/Github-Actions/" style="font-size: 20px;">Github Actions</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/Node-js/" style="font-size: 10px;">Node.js</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/Tools/" style="font-size: 15px;">Tools</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/%E6%8A%98%E8%85%BE/" style="font-size: 20px;">æŠ˜è…¾</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 10px;">ç®—æ³•</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/20220222-01/">Apache Flink 01: äº†è§£ä¸ç¯å¢ƒæ­å»º</a>
          </li>
        
          <li>
            <a href="/20210525-01/">Spring MVC ä¸­æ¡ä»¶æ³¨è§£å¯¼è‡´ @Autowired æ³¨è§£å¤±æ•ˆçš„ BUG</a>
          </li>
        
          <li>
            <a href="/20210915-01/">å•å°ç”µè„‘ä¸Šçš„å¤š Git ç”¨æˆ·é…ç½®</a>
          </li>
        
          <li>
            <a href="/20210910-01/">ä½¿ç”¨ dependabot è‡ªåŠ¨å‡çº§ä¾èµ–</a>
          </li>
        
          <li>
            <a href="/20210822-01/">Clash For Windows ä½¿ç”¨</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 redxiiikk<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>